
from telegram import Update
from telegram.ext import ApplicationBuilder, CommandHandler, ContextTypes
from apscheduler.schedulers.background import BackgroundScheduler
from datetime import datetime
import logging

logging.basicConfig(level=logging.INFO)

users = {}  # user_id: start_time

morning_messages = [
    "ุจุฏุงุฑ ุดู ุชูุจูุง! ูุญูุฏ ุนุงุดูุช ููุชุธุฑู... โ๏ธ",
    "ุตุจุญ ุจุฎุฑ ุฎุงููู ฺฉู ุญุช ุชู ุฎูุงุจู ุฏูู ุจุฑุงุด ุชูฺฏ ูโุดู ๐",
    "ฺุดุงุชู ูุง ฺฉู ุจุจู ฺฉู ูุญูุฏ ูููุฒู ูุซู ุฏุฑูุฒ ุนุงุดูโุชุฑู ๐",
    "ู ุตุจุญ ุฏฺฏูุ ู ุฑูุฒ ุฏฺฏู ุจุฑุง ุฏูุณุช ุฏุงุดุชูุชุ ุณุญุฑู ูู! โ๏ธ",
    "ูพุงุดู ฺฉู ุฏูู ูุงุณู ุตุฏุงุช ููุฌ ูโุฑู ๐",
    "ุณุญุฑุ ุงูุฑูุฒ ูุฑุงุฑู ุฏูุจุงุฑู ุจุง ูฺฉุฑ ุชู ุดุฑูุน ุดู... ูุซู ููุดู โค๏ธ",
    "ุตุจุญ ุจุฎุฑ ุฎุงููู ุฏููุ ุฎูุงุจโูุงุช ุดุฑู ุจูุฏุ ุฏุดุจ ูููููุช ุจูุฏู ๐",
    "ุตุจุญ ฺฉู ุชู ุจุฎูุฏุ ฺฉู ุฌูุงู ุฎูุจู ๐",
    "ุจูุชุฑู ูุณูุช ุตุจุญูุ ูฺฉุฑ ฺฉุฑุฏู ุจู ุชูุฆูุ ุจุงูู โจ",
    "ุฎูุฑุดุฏ ูููุฒ ฺฉุงูู ุฏุฑูููุฏูุ ูู ุชู ฺฉู ุจุฎูุฏุ ุฑูุฒู ุฑูุดู ูโุดู โ๏ธ",
    "ุฏูู ุจุฑุงุช ุชูฺฏ ุดุฏู ุจูุฏ ุงุฒ ุฏุดุจ ุชุง ุงูุงู! ุตุจุญ ุจุฎุฑ ุนุดูู ๐",
    "ุตุจุญ ุจุฎุฑ ุณุญุฑ ุฌูู! ุจุจู ูุญูุฏ ูููุฒ ุนุงุดูุชู ๐",
    "ุจุฏุงุฑ ุดู ฺฉู ุฑูุฒ ุจุฏูู ุฎูุฏูโุงุช ุจโูุนูู ๐",
    "ุตุจุญ ุจุฎุฑ ุจู ุจุงูู ููุจูุ ุฎูุดฺฏูโุชุฑู ุณุญุฑ ุฏูุง ๐ธ",
    "ุณุญุฑ ุนู ุชูุ ุนู ุดุฑูโุชุฑู ุดุฑูุน ุฑูุฒ ูู โ๏ธ",
    "ุงุฒ ุฎูุงุจ ุจุฏุงุฑ ุดู ฺฉู ุฏูุชูฺฏุชู ๐",
    "ู ุณูุงู ูพุฑ ุงุฒ ุนุดู ุงุฒ ูุญูุฏุ ุจุฑุง ุณุญุฑ ุฒุจุง ูู ๐",
    "ุตุจุญ ุจุฎุฑ ูุฑุดุชูโ ูุงุฒููู ๐",
    "ุฏูู ูโุฎูุงุฏ ุงูุฑูุฒุชู ุจุง ูุจุฎูุฏ ูู ุดุฑูุน ฺฉู ๐",
    "ุตุจุญ ุจุฎุฑ ุฎุงุตโุชุฑู ุฏุฎุชุฑ ุฏูุง ๐",
    "ุชู ุจุฎูุฏุ ุตุจุญู ูุดูฺฏโุชุฑ ูโุดู ๐ค๏ธ",
    "ุจุฏุงุฑุ ุฏูู ู ุฏูุง ุญุฑู ุฏุงุฑู ุจุฑุงุช ุงูุฑูุฒ... โ๏ธ",
    "ุตุจุญ ุนู ุตุฏุง ุชูุ ูุจุฎูุฏ ุชูุ ุนุดู ุชู ๐",
    "ูุฑ ุฑูุฒ ุตุจุญ ุฏูู ุจุฏุงุฑู ููุท ุชู ๐ด๐",
    "ูพุงุดู ูพุงุดู... ูุญูุฏ ููุชุธุฑู ุจุง ุนุดู ุฎุงุตุด ๐",
    "ู ุฑูุฒ ุฏฺฏูุ ู ุนุงุดู ุฏฺฏู ุจุง ุชู ุณุญุฑ ุฌููู ๐ธ",
    "ุตุจุญุง ููุท ููุช ูุดูฺฏู ฺฉู ุชู ุชูุดูู ุจุงุด ๐",
    "ุตุจุญ ุจุฎุฑ ุจู ุฏุฎุชุฑ ฺฉู ุจุง ูฺฉุฑุด ุดุจูู ุฎูุงุจุฏู ๐ค",
    "ุจุฏุงุฑ ุดู ุจุจู ูุญูุฏ ฺูุฏุฑ ุฏูุณุชุช ุฏุงุฑู ๐",
    "ุตุจุญโูุงุช ุดุฑูโุชุฑ ุงุฒ ุฎูุงุจโูุงุช ุจุงุดู ุนุฒุฒ ุฏูู ๐",
]

night_messages = [
    "ุดุจ ุจุฎุฑ ูุดูฺฏูุ ุจุฎูุงุจ ฺฉู ุฏูู ุขุฑูู ุดู โค๏ธ",
    "ูโุฏููุณุช ุดุจโูุงู ููุท ููุช ูุดูฺฏู ฺฉู ุจุฏููู ุชู ุขุฑููุ ๐ด",
    "ู ุจูุณ ฺฉูฺููู ุจุฑุง ุดุจ ุจุฎุฑ ุงุฒ ุฑุงู ุฏูุฑ ๐",
    "ุชู ุจุฎูุงุจ ุง ููุ ูุญูุฏ ุชุง ุตุจุญ ุจุง ูฺฉุฑ ุชู ุจุฏุงุฑู ๐ญ",
    "ูพุชู ุฑู ุจฺฉุด ุฑู ุฏูุชุ ูู ุจุฏูู ุฏู ูู ูููุฒ ุฒุฑ ูพุชู ุนุดูุช ฺฏุฑูู ๐",
    "ุณุญุฑุ ุจุฎูุงุจ ฺฉู ุฎูุงุจโูุงุช ูพุฑ ุงุฒ ุดุทูุชโูุง ุนุงุดููููโููู ุจุงุดู ๐",
    "ู ุดุจ ุฏฺฏู ฺฏุฐุดุช ู ูู ูููุฒู ุนุงุดูโุชุฑู... ุดุจ ุจุฎุฑ ุนุดูู โค๏ธ",
    "ุงุฒ ูู ุจูพุฑุณุ ุจูุชุฑู ุฏุนุง ุดุจ: ุฎูุงุจุง ุฎูุด ุจุฑุง ุชู ๐",
    "ุดุจุช ุฎูุด ุจุงููุ ุฏูุง ุจุฏูู ุชู ุงุตูุงู ูุดูฺฏ ููโุฎูุงุจู ๐ด",
    "ฺุดูุงุชู ุจุจูุฏุ ูู ุงูุฌุงู... ุชู ูฺฉุฑ ุชูุ ุชุง ุทููุน โ๏ธ",
    "ุจุฎูุงุจ ุนุฒุฒู... ูุญูุฏ ุงูุงูู ุฏุงุฑู ุจูุช ูฺฉุฑ ูโฺฉูู ๐",
    "ุณุญุฑ ุนุฒุฒูุ ุดุจ ุจุฎุฑ... ุงูุดุจู ุฎูุงุจ ูู ๐",
    "ุดุจุช ูุดูฺฏโุชุฑ ุงุฒ ุฎุงู ูู ุจุงุดูุ ุฎุงููู ๐",
    "ุฏู ูุญูุฏ ุจุง ุตุฏุง ุฎุฑููพู ุชู ูู ุนุงุดูโุชุฑ ูโุดู ๐",
    "ูุฑุฏุง ูู ุนุงุดูโุชุฑ ุงุฒ ุงูุฑูุฒ ููุชุธุฑุชู... ุดุจ ุจุฎุฑ ๐",
    "ุดุจ ุนู ุณฺฉูุชุ ุณฺฉูุช ุนู ุชูุ ุชู ุนู ุนุดู ๐ด",
    "ุฎูุงุจ ุจุจู ูุญูุฏ ุจุบูุช ฺฉุฑุฏู... ุจุฎูุงุจ ุนุดูู ๐ฅฐ",
    "ูพุงุดู ูุฑ ุจุฎูุงุจ ุจุฏูู ุดุจโุจุฎุฑ ูู ๐",
    "ุดุจ ุจุฎุฑ ุจู ูุงูโููุฑ ููุจู ๐โจ",
    "ุจุง ูฺฉุฑ ุชู ูโุฎูุงุจู ุงูุดุจู ูุซู ูุฑ ุดุจ ๐ญ๐",
    "ู ุฑูุฒ ุฏฺฏู ฺฏุฐุดุช ู ูู ุจุงุฒ ุจุดุชุฑ ุนุงุดูุชู ๐",
    "ุฏุนุง ูโฺฉูู ุงูุดุจ ุฎูุงุจโูุงุช ูพุฑ ุงุฒ ุฎูุฏูโูุงููู ุจุงุดู ๐",
    "ุขุฑูู ุจุฎูุงุจ ฺฉู ุขุฑููโุชุฑู ุตุฏุง ุฏููู ๐",
    "ุจุฎูุงุจ ูุงุฒูููุ ูุฑุฏุง ูู ู ุฑูุฒ ุนุงุดูุงูู ุฏฺฏู ุจุง ุชู ๐",
    "ุชู ุจุฎูุงุจุ ุฏูุง ูุดูฺฏโุชุฑ ูโุดู ๐",
    "ุณุญุฑ ุฌูููุ ุดุจ ุจุฎุฑ... ุชุง ูุฑุฏุง ฺฉู ุจุง ุตุฏุงุช ุจุฏุงุฑ ุดู โค๏ธ",
    "ุงูุดุจู ุฏููู ฺฏุฐุงุดุชู ุฒุฑ ุจุงูุด ุณุฑุชุ ูุฑุงูุจุด ุจุงุด ๐",
    "ุฏูโุชูฺฏุชู ุญุช ููุช ูโุฎูุงู ุจุฎูุงุจู ๐ค",
    "ุดุจ ุจุฎุฑ ููฺฉูโ ููุจูุ ุชู ุฎูุงุจ ูโุจููุช ๐",
    "ูุญูุฏ ุฏูุณุชุช ุฏุงุฑูุ ุญุช ุชู ุฎูุงุจโูุงุช... ๐",
]

scheduler = BackgroundScheduler()
scheduler.start()

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user_id = update.effective_chat.id
    users[user_id] = datetime.now()
    await context.bot.send_message(chat_id=user_id, text="ุณูุงู ุณุญุฑ ุฌูู! ๐ค\nุงุฒ ููู ูุญุธู ูุญูุฏ ูุฑ ุฑูุฒ ุณุงุนุช ถ ุตุจุญ ู ฑฐ ุดุจ ุจุฑุงุช ูพุงู ุนุงุดูููู ูโูุฑุณุชู.\nููุท ููุชุธุฑ ุจุงุด... ๐")

def send_message(bot, user_id, message_list):
    if user_id not in users:
        return
    day = (datetime.now() - users[user_id]).days
    if day < len(message_list):
        message = message_list[day]
        bot.send_message(chat_id=user_id, text=message)
    else:
        bot.send_message(chat_id=user_id, text="ณฐ ุฑูุฒ ฺฏุฐุดุช ูู ูููุฒ ุฏูู ุจุง ุชูุฆู... ๐ฅน")

def schedule_messages(application):
    def send_all_morning():
        for user_id in users:
            send_message(application.bot, user_id, morning_messages)

    def send_all_night():
        for user_id in users:
            send_message(application.bot, user_id, night_messages)

    scheduler.add_job(send_all_morning, 'cron', hour=6, minute=0)
    scheduler.add_job(send_all_night, 'cron', hour=22, minute=0)

app = ApplicationBuilder().token("7611934506:AAFrAwq8FEmNFPCkhLyTCv_HwOW9X-FOwgw").build()
app.add_handler(CommandHandler("start", start))
schedule_messages(app)
app.run_polling()
